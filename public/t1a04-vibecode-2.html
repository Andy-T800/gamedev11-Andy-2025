<pre id=p></pre><script>
w=40;h=15;
pp=h/2|0;ap=h/2|0;
bx=w/2|0;by=h/2|0;
bdx=1;bdy=1;
ps=0;as=0;
d=document;
p=d.getElementById('p');
let aiMoveCounter=0;
function dG(){
s='Player '+ps+'  AI '+as+'\n';
for(y=0;y<h;y++){
for(x=0;x<w;x++){
if(x==0||x==w-1)s+='|';
else if(y==0||y==h-1)s+='-';
else if(x==1&&y>=pp-1&&y<=pp+1)s+='|';
else if(x==w-2&&y>=ap-1&&y<=ap+1)s+='|';
else if(x==bx&&y==by)s+='O';
else s+=' ';
}
s+='\n'
}
p.textContent=s;
}
function uG(){
bx+=bdx;by+=bdy;
if(by<=1||by>=h-2)bdy=-bdy;
if(bx==2&&by>=pp-1&&by<=pp+1)bdx=1;
if(bx==w-3&&by>=ap-1&&by<=ap+1)bdx=-1;
if(bx<=0){as++;reset()}
else if(bx>=w-1){ps++;reset()}
// AI moves only every 2 calls to slow it down
aiMoveCounter++;
if(aiMoveCounter%3===0){
  if(ap<by)ap++;
  else if(ap>by)ap--;
}
dG();
}
function reset(){
bx=w/2|0;by=h/2|0;bdx=bdx>0?-1:1;bdy=1;
}
d.onkeydown=e=>{
if(e.key=='ArrowUp'&&pp>1)pp--;
if(e.key=='ArrowDown'&&pp<h-2)pp++;
}
setInterval(uG,100);
dG();
</script>
