<head>
  <title>Pong</title>
  <style>canvas{background:black;display:block;margin:0 auto;border:2px solid white}</style>
</head>
<body>
  <canvas id="c" width="800" height="500"></canvas>
  <script>
    const c = document.getElementById('c');
    const ctx = c.getContext('2d');
    const pH = 100, pW = 10, bS = 10;
    let pY = c.height/2 - pH/2, aiY = pY, bX = c.width/2, bY = c.height/2, bVX = 5, bVY = 5;

    c.onmousemove = e => {
      const rect = c.getBoundingClientRect();
      pY = e.clientY - rect.top - pH/2;
    };

    function loop(){
      // Move ball
      bX += bVX; bY += bVY;
      if(bY < 0 || bY > c.height) bVY = -bVY;

      // AI paddle
      let aiC = aiY + pH/2;
      if(aiC < bY - 35) aiY += 6;
      else if(aiC > bY + 35) aiY -= 6;

      // Ball collision with paddles
      if(bX < pW && bY > pY && bY < pY + pH) bVX = -bVX;
      if(bX > c.width - pW && bY > aiY && bY < aiY + pH) bVX = -bVX;

      // Reset ball if out
      if(bX < 0 || bX > c.width){
        bX = c.width/2; bY = c.height/2; bVX = -bVX; bVY = 5;
      }

      // Draw everything
      ctx.fillStyle = 'black';
      ctx.fillRect(0, 0, c.width, c.height);
      ctx.fillStyle = 'white';

      // Player paddle
      ctx.fillRect(0, pY, pW, pH);
      // AI paddle
      ctx.fillRect(c.width - pW, aiY, pW, pH);
      // Ball
      ctx.beginPath();
      ctx.arc(bX, bY, bS, 0, Math.PI*2);
      ctx.fill();

      requestAnimationFrame(loop);
    }

    loop();
  </script>
</body>
</html>
